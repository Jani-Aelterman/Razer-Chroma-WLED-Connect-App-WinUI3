<ui:FluentWindow x:Class="RazerChromaWLEDConnect.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:tray="http://schemas.lepo.co/wpfui/2022/xaml/tray"
        mc:Ignorable="d"
        Title="Razer Chroma WLED Connect" Width="380" Height="500" 
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize" 
        Closing="Window_Closing"
        StateChanged="StateChange"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        WindowCornerPreference="Round"
        Background="{DynamicResource ApplicationBackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" /> <!-- TitleBar -->
            <RowDefinition Height="*" /> <!-- Content -->
            <RowDefinition Height="Auto" /> <!-- Footer -->
        </Grid.RowDefinitions>

        <ui:TitleBar Grid.Row="0" Title="Razer Chroma WLED Connect" />

        <!-- NotifyIcon (System Tray) -->
        <tray:NotifyIcon
            x:Name="TrayIcon"
            Icon="razer-wled.ico"
            MenuOnRightClick="True"
            TooltipText="Razer Chroma WLED Connect">
            <tray:NotifyIcon.Menu>
                <ContextMenu>
                    <ui:MenuItem Header="Show" Click="showApplication">
                        <ui:MenuItem.Icon>
                            <ui:SymbolIcon Symbol="Window24"/>
                        </ui:MenuItem.Icon>
                    </ui:MenuItem>

                    <ui:MenuItem x:Name="ContextMenuItemSync"
                        Header="Sync with Razer Connect" 
                        IsCheckable="True"
                        Checked="contextMenuSyncWithRazerCheck"
                        Unchecked="contextMenuSyncWithRazerUnCheck">
                        <ui:MenuItem.Icon>
                            <ui:SymbolIcon Symbol="ArrowSync24"/>
                        </ui:MenuItem.Icon>
                    </ui:MenuItem>

                    <ui:MenuItem x:Name="ContextMenuItemRunAtBoot"
                        Header="Run at boot" 
                        IsCheckable="True"
                        Checked="contextMenuRunAtBootCheck"
                        Unchecked="contextMenuRunAtBootUnCheck">
                        <ui:MenuItem.Icon>
                            <ui:SymbolIcon Symbol="PersonRunning20"/>
                        </ui:MenuItem.Icon>
                    </ui:MenuItem>

                    <Separator />

                    <ui:MenuItem Header="Settings" Click="settingsShowWindow">
                        <ui:MenuItem.Icon>
                            <ui:SymbolIcon Symbol="Settings24"/>
                        </ui:MenuItem.Icon>
                    </ui:MenuItem>

                    <Separator />

                    <ui:MenuItem Header="Quit" Click="quitApplication">
                        <ui:MenuItem.Icon>
                            <ui:SymbolIcon Symbol="ArrowExit20"/>
                        </ui:MenuItem.Icon>
                    </ui:MenuItem>
                </ContextMenu>
            </tray:NotifyIcon.Menu>
        </tray:NotifyIcon>


        <ScrollViewer Grid.Row="1">
            <StackPanel>

                <ui:CardControl Header="LED Status" Margin="20,10,20,10" CornerRadius="10">
                    <!-- LED Status Indicators -->
                    <StackPanel>
                        <!--<ui:TextBlock Text="LED Status" FontWeight="SemiBold" Margin="0,0,0,12"/>-->
                        <UniformGrid Rows="1" Columns="4" Width="200" HorizontalAlignment="Right">
                            <StackPanel HorizontalAlignment="Center">
                                <Ellipse x:Name="CL2" Width="16" Height="16" Fill="#333333" Stroke="{DynamicResource TextControlForeground}" StrokeThickness="1"/>
                                <TextBlock Text="1" HorizontalAlignment="Center" Margin="0,4,0,0" FontSize="10"/>
                            </StackPanel>
                            <StackPanel HorizontalAlignment="Center">
                                <Ellipse x:Name="CL3" Width="16" Height="16" Fill="#333333" Stroke="{DynamicResource TextControlForeground}" StrokeThickness="1"/>
                                <TextBlock Text="2" HorizontalAlignment="Center" Margin="0,4,0,0" FontSize="10"/>
                            </StackPanel>
                            <StackPanel HorizontalAlignment="Center">
                                <Ellipse x:Name="CL4" Width="16" Height="16" Fill="#333333" Stroke="{DynamicResource TextControlForeground}" StrokeThickness="1"/>
                                <TextBlock Text="3" HorizontalAlignment="Center" Margin="0,4,0,0" FontSize="10"/>
                            </StackPanel>
                            <StackPanel HorizontalAlignment="Center">
                                <Ellipse x:Name="CL5" Width="16" Height="16" Fill="#333333" Stroke="{DynamicResource TextControlForeground}" StrokeThickness="1"/>
                                <TextBlock Text="4" HorizontalAlignment="Center" Margin="0,4,0,0" FontSize="10"/>
                            </StackPanel>
                        </UniformGrid>
                    </StackPanel>
                </ui:CardControl>
                

                <!-- Sync Control -->
                <ui:CardControl Header="Sync Razer Chroma" Margin="20,10,20,10" CornerRadius="10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <!--<ui:TextBlock Text="Sync Razer Chroma" FontWeight="SemiBold"/>-->
                            <ui:TextBlock x:Name="RazerState" Text="Disconnected" Foreground="#AAAAAA" FontSize="12"/>
                        </StackPanel>
                        <CheckBox Grid.Column="1" x:Name="BroadcastEnabled" IsChecked="False" Unchecked="syncWithRazerUnCheck" Checked="syncWithRazer" VerticalAlignment="Center" />
                    </Grid>
                </ui:CardControl>

                <!-- Settings Button -->
                <!--<Button Content="Open Settings" HorizontalAlignment="Stretch" Click="settingsShowWindow" Margin="20,10,20,10" Padding="10"/>-->
                <ui:Button HorizontalAlignment="Stretch" Click="settingsShowWindow" Margin="20,10,20,10" Padding="10">
                    <StackPanel Orientation="Horizontal">
                        <ui:SymbolIcon Symbol="Settings24" Margin="0,0,8,0"/>
                        <TextBlock Text="Open Settings"/>
                    </StackPanel>
                </ui:Button>


                <!-- WLED Instances Placeholder -->
            <ui:TextBlock Text="WLED Instances" FontWeight="SemiBold" Margin="0,10,0,0" />
            <Border BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Height="100">
                 <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel x:Name="wledInstances">
                        <!-- Dynamic content -->
                    </StackPanel>
                </ScrollViewer>
            </Border>
           
        </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Margin="0,0,0,10" HorizontalAlignment="Center">
             <TextBlock Text="Made by Jani Aelterman" Cursor="Hand" MouseUp="about" FontSize="10" Foreground="{DynamicResource TextFillColorTertiaryBrush}" HorizontalAlignment="Center"/>
             <TextBlock Text="v0.0.2" FontSize="10" Foreground="{DynamicResource TextFillColorTertiaryBrush}" HorizontalAlignment="Center"/>
        </StackPanel>
    </Grid>
</ui:FluentWindow>
